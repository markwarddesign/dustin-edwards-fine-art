(()=>{"use strict";const e=window.React,t=window.wp.blocks,a=window.wp.blockEditor,r=window.wp.components,o=window.wp.data,s=window.wp.i18n;(0,t.registerBlockType)("dedwards/collection-section",{edit:({attributes:t,setAttributes:n})=>{const l=(0,a.useBlockProps)({className:"px-4 md:px-12 pb-32 bg-bronze-50"}),{heading:c,subheading:d,postsPerPage:i,category:m}=t,{works:p,categories:g}=(0,o.useSelect)(e=>{const{getEntityRecords:t}=e("core"),a={per_page:i,status:"publish",_embed:!0};return m&&(a.work_category=m),{works:t("postType","work",a)||[],categories:t("taxonomy","work_category",{per_page:-1})||[]}},[i,m]),u=(e,t)=>e?.meta?.[t]||"",w=e=>e?._embedded?.["wp:featuredmedia"]?.[0]?.source_url?e._embedded["wp:featuredmedia"][0].source_url:"https://images.unsplash.com/photo-1628607153673-455b550117d9?q=80&w=1500&auto=format&fit=crop",b=e=>{const t=["","md:mt-16","","md:mt-16","","md:mt-32"];return t[e%t.length]},_=e=>{const t=["aspect-[4/5]","aspect-square","aspect-[3/4]","aspect-[4/3]","aspect-[3/5]","aspect-square"];return t[e%t.length]},x=[{label:(0,s.__)("All Categories","dedwards"),value:""},...g.map(e=>({label:e.name,value:e.id.toString()}))];return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(a.InspectorControls,null,(0,e.createElement)(r.PanelBody,{title:(0,s.__)("Collection Settings","dedwards")},(0,e.createElement)(r.TextControl,{label:(0,s.__)("Heading","dedwards"),value:c,onChange:e=>n({heading:e})}),(0,e.createElement)(r.TextControl,{label:(0,s.__)("Subheading","dedwards"),value:d,onChange:e=>n({subheading:e})}),(0,e.createElement)(r.RangeControl,{label:(0,s.__)("Number of Works","dedwards"),value:i,onChange:e=>n({postsPerPage:e}),min:3,max:12}),(0,e.createElement)(r.SelectControl,{label:(0,s.__)("Category Filter","dedwards"),value:m,options:x,onChange:e=>n({category:e})}))),(0,e.createElement)("section",{...l},(0,e.createElement)("div",{className:"flex flex-col md:flex-row justify-between items-end mb-16 border-b border-bronze-200 pb-6"},(0,e.createElement)("h2",{className:"text-sm font-display uppercase tracking-widest text-bronze-800"},c),(0,e.createElement)("span",{className:"text-xs font-sans uppercase tracking-[0.2em] text-bronze-500 mt-2 md:mt-0"},d)),(0,e.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-y-20 gap-x-10"},0===p.length?(0,e.createElement)("p",{className:"col-span-full text-center text-bronze-600"},(0,s.__)("No works found. Add some work posts to display them here.","dedwards")):p.map((t,a)=>(0,e.createElement)("div",{key:t.id,className:`group cursor-pointer ${b(a)}`},(0,e.createElement)("div",{className:`relative overflow-hidden ${_(a)} bg-stone-200 shadow-xl`},(0,e.createElement)("div",{className:"absolute inset-0 bg-stone-900/10 group-hover:bg-transparent transition-colors z-10"}),(0,e.createElement)("img",{src:w(t),className:"w-full h-full object-cover transition-transform duration-1000 group-hover:scale-105",alt:t.title.rendered})),(0,e.createElement)("div",{className:"mt-6 flex flex-col items-center text-center"},(0,e.createElement)("h3",{className:"font-serif text-2xl italic text-stone-800"},t.title.rendered),(0,e.createElement)("p",{className:"text-[10px] uppercase tracking-[0.2em] text-bronze-600 mt-2"},(e=>{const t=u(e,"_work_material"),a=u(e,"_work_edition"),r=u(e,"_work_dimensions");return a?`${t||"Bronze"} ${a}`:r?`${t||"Bronze"}, ${r}`:t||"Bronze"})(t))))))))},save:()=>null})})();