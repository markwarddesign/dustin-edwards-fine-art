(()=>{"use strict";const e=window.React,a=window.wp.blocks,t=window.wp.blockEditor,r=window.wp.components,o=window.wp.data,n=window.wp.i18n;(0,a.registerBlockType)("dedwards/mosaic-gallery",{edit:({attributes:a,setAttributes:s})=>{const l=(0,t.useBlockProps)({className:"px-4 md:px-12 pb-32 bg-bronze-50"}),{heading:d,subheading:c,postsPerPage:i,category:p,showTitles:m,showMetadata:w,mosaicPattern:u}=a,{works:g,categories:h}=(0,o.useSelect)(e=>{const{getEntityRecords:a}=e("core"),t={per_page:i,status:"publish",_embed:!0};return p&&(t.work_category=p),{works:a("postType","work",t)||[],categories:a("taxonomy","work_category",{per_page:-1})||[]}},[i,p]),b=(e,a)=>e?.meta?.[a]||"",_=e=>e?._embedded?.["wp:featuredmedia"]?.[0]?.source_url?e._embedded["wp:featuredmedia"][0].source_url:"https://images.unsplash.com/photo-1628607153673-455b550117d9?q=80&w=1500&auto=format&fit=crop",f=[{label:(0,n.__)("All Categories","dedwards"),value:""},...h.map(e=>({label:e.name,value:e.id.toString()}))],y=[{label:(0,n.__)("Dynamic Mosaic","dedwards"),value:"dynamic"},{label:(0,n.__)("Uniform Grid","dedwards"),value:"uniform"},{label:(0,n.__)("Featured First","dedwards"),value:"featured"}];return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(t.InspectorControls,null,(0,e.createElement)(r.PanelBody,{title:(0,n.__)("Gallery Settings","dedwards")},(0,e.createElement)(r.TextControl,{label:(0,n.__)("Heading","dedwards"),value:d,onChange:e=>s({heading:e})}),(0,e.createElement)(r.TextControl,{label:(0,n.__)("Subheading","dedwards"),value:c,onChange:e=>s({subheading:e})}),(0,e.createElement)(r.RangeControl,{label:(0,n.__)("Number of Works","dedwards"),value:i,onChange:e=>s({postsPerPage:e}),min:4,max:16}),(0,e.createElement)(r.SelectControl,{label:(0,n.__)("Category Filter","dedwards"),value:p,options:f,onChange:e=>s({category:e})})),(0,e.createElement)(r.PanelBody,{title:(0,n.__)("Layout Options","dedwards")},(0,e.createElement)(r.SelectControl,{label:(0,n.__)("Mosaic Pattern","dedwards"),value:u,options:y,onChange:e=>s({mosaicPattern:e})}),(0,e.createElement)(r.ToggleControl,{label:(0,n.__)("Show Titles","dedwards"),checked:m,onChange:e=>s({showTitles:e})}),(0,e.createElement)(r.ToggleControl,{label:(0,n.__)("Show Metadata","dedwards"),checked:w,onChange:e=>s({showMetadata:e})}))),(0,e.createElement)("section",{...l},(0,e.createElement)("div",{className:"flex flex-col md:flex-row justify-between items-end mb-16 border-b border-bronze-200 pb-6"},(0,e.createElement)("h2",{className:"text-sm font-display uppercase tracking-widest text-bronze-800"},d),(0,e.createElement)("span",{className:"text-xs font-sans uppercase tracking-[0.2em] text-bronze-500 mt-2 md:mt-0"},c)),(0,e.createElement)("div",{className:"grid grid-cols-3 md:grid-cols-4 lg:grid-cols-6 auto-rows-[200px] gap-4"},0===g.length?(0,e.createElement)("div",{className:"col-span-full flex items-center justify-center h-64 text-center text-bronze-600 bg-bronze-100 rounded-lg"},(0,e.createElement)("p",null,(0,n.__)("No works found. Add some work posts to display them here.","dedwards"))):g.map((a,t)=>{const r=(e=>{const a={dynamic:["col-span-2 row-span-2","col-span-1 row-span-1","col-span-1 row-span-2","col-span-2 row-span-1","col-span-1 row-span-1","col-span-1 row-span-1","col-span-2 row-span-1","col-span-1 row-span-2","col-span-1 row-span-1","col-span-2 row-span-2"],uniform:["col-span-1 row-span-1"],featured:["col-span-2 row-span-3","col-span-1 row-span-1","col-span-1 row-span-1","col-span-1 row-span-2","col-span-1 row-span-1","col-span-1 row-span-1","col-span-2 row-span-1","col-span-1 row-span-1"]},t=a[u]||a.dynamic;return t[e%t.length]})(t,g.length);return(e=>{e.includes("row-span-3")||e.includes("row-span-2")&&e.includes("col-span-2")||e.includes("row-span-2")||e.includes("col-span-2")})(r),(0,e.createElement)("div",{key:a.id,className:`group cursor-pointer relative overflow-hidden rounded-lg shadow-lg hover:shadow-xl transition-shadow duration-300 ${r}`},(0,e.createElement)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 z-10"}),(0,e.createElement)("img",{src:_(a),className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-105",alt:a.title.rendered}),(m||w)&&(0,e.createElement)("div",{className:"absolute bottom-0 left-0 right-0 p-4 transform translate-y-full group-hover:translate-y-0 transition-transform duration-300 z-20"},m&&(0,e.createElement)("h3",{className:"font-serif text-white text-lg leading-tight mb-1"},a.title.rendered),w&&(0,e.createElement)("p",{className:"text-xs uppercase tracking-wider text-white/80"},(e=>{const a=b(e,"_work_material"),t=b(e,"_work_edition"),r=b(e,"_work_dimensions");return t?`${a||"Bronze"} ${t}`:r?`${a||"Bronze"}, ${r}`:a||"Bronze"})(a))),(0,e.createElement)("div",{className:"absolute top-4 right-4 w-6 h-6 border-2 border-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300 z-20"},(0,e.createElement)("div",{className:"w-full h-full bg-white rounded-full transform scale-0 group-hover:scale-75 transition-transform duration-200"})))})),(0,e.createElement)("div",{className:"mt-12 text-center"},(0,e.createElement)("p",{className:"text-xs uppercase tracking-[0.3em] text-bronze-500"},g.length," ",1===g.length?(0,n.__)("Work","dedwards"):(0,n.__)("Works","dedwards")))))},save:()=>null})})();