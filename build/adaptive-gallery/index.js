(()=>{"use strict";const e=window.React,t=window.wp.blocks,a=window.wp.blockEditor,l=window.wp.components,n=window.wp.i18n;(0,t.registerBlockType)("dedwards/adaptive-gallery",{edit:({attributes:t,setAttributes:r})=>{const{images:s}=t,c=(0,a.useBlockProps)(),i=(e,t,a)=>{const l=[...s];l[e][t]=a,r({images:l})};return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(a.InspectorControls,null,(0,e.createElement)(l.PanelBody,{title:(0,n.__)("Gallery Settings","dedwards")},(0,e.createElement)(a.MediaUploadCheck,null,(0,e.createElement)(a.MediaUpload,{onSelect:e=>{const t=e.map(e=>({id:e.id,url:e.url,alt:e.alt||"",title:e.title||"",caption:e.caption||""}));r({images:t})},allowedTypes:["image"],multiple:!0,gallery:!0,value:s.map(e=>e.id),render:({open:t})=>(0,e.createElement)(l.BaseControl,null,(0,e.createElement)(l.Button,{onClick:t,variant:"secondary",size:"default"},s.length>0?(0,n.__)("Edit Gallery","dedwards"):(0,n.__)("Create Gallery","dedwards")),s.length>0&&(0,e.createElement)(l.Button,{onClick:()=>r({images:[]}),variant:"tertiary",isDestructive:!0,style:{marginLeft:"8px"}},(0,n.__)("Clear Gallery","dedwards")))})),s.length>0&&(0,e.createElement)("div",{style:{marginTop:"16px"}},(0,e.createElement)("strong",null,s.length," ",1===s.length?"image":"images"," selected")),s.map((t,a)=>(0,e.createElement)(l.PanelBody,{key:t.id,title:`Image ${a+1}`,initialOpen:!1},(0,e.createElement)("img",{src:t.url,style:{width:"100%",height:"auto",marginBottom:"10px"}}),(0,e.createElement)(l.TextControl,{label:(0,n.__)("Title","dedwards"),value:t.title,onChange:e=>i(a,"title",e)}),(0,e.createElement)(l.TextControl,{label:(0,n.__)("Caption","dedwards"),value:t.caption,onChange:e=>i(a,"caption",e)}),(0,e.createElement)(l.Button,{onClick:()=>(e=>{const t=s.filter((t,a)=>a!==e);r({images:t})})(a),isDestructive:!0},(0,n.__)("Remove Image","dedwards")))))),(0,e.createElement)("div",{...c},(0,e.createElement)("main",{className:"max-w-[1600px] mx-auto px-8 md:px-12 pb-40"},0===s.length?(0,e.createElement)("div",{className:"text-center py-20 border-2 border-dashed border-stone-300"},(0,e.createElement)("p",{className:"text-stone-500"},"Add images to create your adaptive gallery")):(0,e.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-y-32 md:gap-x-20 items-end"},s.map((t,a)=>{let l="md:col-span-6",n="aspect-[4/5]",r="text-left";switch(a%5){case 0:l="md:col-span-8",n="aspect-[16/9]";break;case 1:l="md:col-span-4",n="aspect-[3/4]",r="md:text-left text-right";break;case 2:l="md:col-span-5",n="aspect-[4/5]";break;case 3:l="md:col-span-7",n="aspect-square";break;case 4:l="md:col-start-3 md:col-span-8",n="aspect-[16/7]",r="text-center"}return(0,e.createElement)("div",{key:t.id,className:`${l} reveal`},(0,e.createElement)("div",{className:`img-wrapper ${n} overflow-hidden bg-stone-100`},(0,e.createElement)("img",{src:t.url,alt:t.alt,className:"h-full w-full object-cover transition-transform duration-700 hover:scale-105"})),(t.title||t.caption)&&(0,e.createElement)("div",{className:`mt-8 ${r}`},t.title&&(0,e.createElement)("h3",{className:"font-serif text-3xl font-light italic text-stone-900"},t.title),t.caption&&(0,e.createElement)("p",{className:"text-[10px] uppercase tracking-[0.3em] text-stone-500 mt-2"},t.caption)))})))))}})})();