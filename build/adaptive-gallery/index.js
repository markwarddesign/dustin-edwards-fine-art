(()=>{"use strict";const e=window.React,t=window.wp.blocks,a=window.wp.blockEditor,l=window.wp.components,n=window.wp.i18n;(0,t.registerBlockType)("dedwards/adaptive-gallery",{edit:({attributes:t,setAttributes:r})=>{const{images:i}=t,s=(0,a.useBlockProps)(),c=(e,t,a)=>{const l=[...i];l[e][t]=a,r({images:l})};return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(a.InspectorControls,null,(0,e.createElement)(l.PanelBody,{title:(0,n.__)("Gallery Settings","dedwards")},(0,e.createElement)(a.MediaUploadCheck,null,(0,e.createElement)(a.MediaUpload,{onSelect:e=>{const t=e.map(e=>({id:e.id,url:e.url,alt:e.alt||"",title:e.title||"",caption:e.caption||""}));r({images:t})},allowedTypes:["image"],multiple:!0,gallery:!0,value:i.map(e=>e.id),render:({open:t})=>(0,e.createElement)(l.BaseControl,null,(0,e.createElement)(l.Button,{onClick:t,variant:"secondary",size:"default"},i.length>0?(0,n.__)("Edit Gallery","dedwards"):(0,n.__)("Create Gallery","dedwards")),i.length>0&&(0,e.createElement)(l.Button,{onClick:()=>r({images:[]}),variant:"tertiary",isDestructive:!0,style:{marginLeft:"8px"}},(0,n.__)("Clear Gallery","dedwards")))})),i.length>0&&(0,e.createElement)("div",{style:{marginTop:"16px"}},(0,e.createElement)("strong",null,i.length," ",1===i.length?"image":"images"," selected")),i.map((t,a)=>(0,e.createElement)(l.PanelBody,{key:t.id,title:`Image ${a+1}`,initialOpen:!1},(0,e.createElement)("img",{src:t.url,style:{width:"100%",height:"auto",marginBottom:"10px"}}),(0,e.createElement)(l.TextControl,{label:(0,n.__)("Title","dedwards"),value:t.title,onChange:e=>c(a,"title",e)}),(0,e.createElement)(l.TextControl,{label:(0,n.__)("Caption","dedwards"),value:t.caption,onChange:e=>c(a,"caption",e)}),(0,e.createElement)(l.Button,{onClick:()=>(e=>{const t=i.filter((t,a)=>a!==e);r({images:t})})(a),isDestructive:!0},(0,n.__)("Remove Image","dedwards")))))),(0,e.createElement)("div",{...s},(0,e.createElement)("main",{className:"max-w-[1600px] mx-auto px-8 md:px-12 pb-40"},0===i.length?(0,e.createElement)("div",{className:"text-center py-20 border-2 border-dashed border-stone-300"},(0,e.createElement)("p",{className:"text-stone-500"},"Add images to create your adaptive gallery")):(0,e.createElement)("div",{className:"columns-1 md:columns-2 lg:columns-3 xl:columns-4 gap-8 space-y-8"},i.map((t,a)=>{let l="w-full",n="mb-8";switch(a%6){case 0:l="w-full",n="mb-12";break;case 1:case 5:l="w-full",n="mb-6";break;case 2:l="w-full",n="mb-10";break;case 3:l="w-full",n="mb-8";break;case 4:l="w-full",n="mb-14"}return(0,e.createElement)("div",{key:t.id,className:`${l} ${n} break-inside-avoid reveal`},(0,e.createElement)("div",{className:"img-wrapper overflow-hidden bg-stone-100"},(0,e.createElement)("img",{src:t.url,alt:t.alt,className:"w-full h-auto transition-transform duration-700 hover:scale-105"})),(t.title||t.caption)&&(0,e.createElement)("div",{className:"mt-6 text-left"},t.title&&(0,e.createElement)("h3",{className:"font-serif text-xl md:text-2xl font-light italic text-stone-900"},t.title),t.caption&&(0,e.createElement)("p",{className:"text-[9px] uppercase tracking-[0.3em] text-stone-500 mt-1"},t.caption)))})))))}})})();